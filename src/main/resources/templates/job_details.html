<!DOCTYPE html>
<html lang="ro" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalii Eveniment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-primary mb-4">
    <div class="container">
        <a href="/jobs" class="btn btn-outline-light btn-sm">â¬… Ãnapoi la ListÄƒ</a>
        <span class="navbar-brand h1 mb-0" th:text="${event.title}">Detalii</span>
    </div>
</nav>

<div class="container">

    <div class="card shadow mb-5">
        <div class="card-body">
            <h2 class="card-title text-primary" th:text="${event.title}">Titlu</h2>
            <h5 class="text-muted mb-3" th:text="${event.company.companyName}">Companie</h5>

            <p class="lead" th:text="${event.description}">Descriere detaliatÄƒ...</p>

            <hr>
            <div class="row">
                <div class="col-md-6">
                    <strong>ğŸ“… Ãncepe:</strong> <span th:text="${event.startDate}">Data</span>
                </div>
                <div class="col-md-6">
                    <strong>ğŸ Se terminÄƒ:</strong> <span th:text="${event.endDate}">Data</span>
                </div>
            </div>

            <div class="mt-4 text-end" th:unless="${isFinished}">
                <form th:action="@{/jobs/apply/{id}(id=${event.id})}" method="post">
                    <button type="submit" class="btn btn-lg btn-success">
                        Vreau sÄƒ particip! ğŸš€
                    </button>
                </form>
            </div>
        </div>
    </div>

    <h3 class="border-bottom pb-2 mb-4">ğŸ’¬ PÄƒrerile Voluntarilor</h3>

    <div th:unless="${isFinished}" class="alert alert-info d-flex align-items-center shadow-sm">
        <span class="fs-2 me-3">ğŸ”’</span>
        <div>
            <strong>Recenziile sunt ascunse momentan.</strong><br>
            Acestea vor deveni vizibile publicului dupÄƒ Ã®ncheierea evenimentului (dupÄƒ data de <strong th:text="${event.endDate}">Data</strong>).
        </div>
    </div>

    <div th:if="${isFinished}">

        <div th:if="${reviews.empty}" class="alert alert-light border text-center text-muted p-4">
            Nimeni nu a lÄƒsat o recenzie Ã®ncÄƒ.
        </div>

        <div class="row">
            <div th:each="rev : ${reviews}" class="col-md-12 mb-3">
                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">

                            <div>
                                <h6 class="fw-bold text-primary mb-1">
                                    <span th:text="${rev.reviewer.firstName} + ' ' + ${rev.reviewer.lastName}">Nume</span>

                                    <span th:if="${rev.reviewer.id == currentUserId}" class="badge bg-warning text-dark ms-2">Eu</span>
                                </h6>

                                <div class="text-warning mb-2">
                                    <span th:text="${'â­'.repeat(rev.rating)}">*****</span>
                                    <span class="text-muted small" th:text="'(' + ${rev.rating} + '/5)'"></span>
                                </div>

                                <p class="fst-italic text-secondary">
                                    "<span th:text="${rev.comment}">Comentariu...</span>"
                                </p>

                                <small class="text-muted" th:text="${#temporals.format(rev.date, 'dd-MM-yyyy')}">Data</small>
                            </div>

                            <div th:if="${rev.reviewer.id == currentUserId}">
                                <a th:href="@{/volunteer/review-event/{id}(id=${event.id})}"
                                   class="btn btn-outline-primary btn-sm">
                                    âœï¸ EditeazÄƒ
                                </a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<br><br>
</body>
</html>